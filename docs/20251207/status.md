# Status – 2025-12-07

Scope: critical pass over docs/20251113/*, docs/kiro-spec-digest.md, README*, README_GRPC.md, README_PROCESS_MANAGEMENT.md, and the current code. Snakepit boots (`mix run -e "Application.ensure_all_started(:snakepit)"` → `{:ok, []}`), but the gaps below remain.

- **Spec compliance (.kiro v0.7/0.8)**: No shared-memory/zero-copy path, serializer negotiation, or concurrency guards (v0.8.0_1-*); session storage is single-node ETS with no adapter interface or clustering (v0.7.0_1-02); no chaos harness (v0.7.0_1-04); no structured cross-language error taxonomy or retry guidance (v0.7.0_2-03); no health probe HTTP surface, migration controller, or perf-monitor aggregation/alerting (v0.7.0_3-01/02/03).
- **Doc <> code drift**: README/README_GRPC and `lib/snakepit/adapters/grpc_python.ex` market streaming as ready, but `lib/snakepit/grpc/bridge_server.ex:213` hard-raises UNIMPLEMENTED for streaming RPCs. Architecture docs claim BEAM memory recycling is wired through `:get_memory_usage`; the worker samples only its own BEAM memory and has no Python-side sampling or zero-copy thresholds. Docs describe “automatic bootstrap” yet runtime still depends on manual `.venv`/`make bootstrap` paths.
- **Python environment + spawn gaps**: EnvDoctor (`lib/snakepit/env_doctor.ex`) checks a single interpreter/venv; there’s no resolver across uv/conda/poetry or health scoring. GRPCWorker spawns Python without default `adapter_env`, so `PYTHONPATH`/`SNAKEPIT_PYTHON` are not propagated unless manually configured; this matches snakebridge real-Python runs still failing with `{:error, :snakepit_unavailable}` / worker exit status 2 and “grpc_server.py missing” when the packaged asset or env isn’t present. Packaging must ensure `priv/python/grpc_server.py` ships with the Hex artefact used by snakebridge.
- **Process management still Unix-only**: ProcessKiller (`/proc`, `/bin/kill`) and ApplicationCleanup are Linux/macOS-centric; there’s no watchdog/self-termination for workers when the BEAM PID disappears, and no cross-platform fallback as the reliability spec calls for.
- **Operational surfaces missing**: No `/live`/`/ready`/`/startup` endpoints, no adapter/session health providers, no migration/dry-run/rollback tooling, and no perf dashboards or alert wiring despite the docs promising them. Telemetry metrics exist but reporters are opt-in and there’s no documented LiveDashboard/Grafana bundle.
- **Slow-test hygiene not applied**: The tag plan in docs/20251113/slow-test-report.md isn’t reflected in the code; restart-heavy suites (StartupFailFast*, WorkerSupervisor fixed-port probe, queue saturation, heartbeat refutes) still run untagged.
- **Scripts audit (scripts/*.sh)**: `install_protoc_ubuntu.sh` is interactive/sudo-bound; `run_integration_tests.sh` assumes a nested snakepit/ path that doesn’t exist; `setup_python.sh` prompts and installs into system Python by default; `setup_test_pythons.sh`/`verify_python313.sh` manually create/inspect venvs but aren’t wired into mix tasks. None of these match the “automatic bootstrap” story.
- **Runtime note**: Snakepit starts cleanly via `mix run -e "Application.ensure_all_started(:snakepit)"`, but real snakebridge tests still need env propagation + packaged grpc_server.py to avoid `:snakepit_unavailable`/exit_status=2 failures.
